# Ecology Pack: Predator-Prey Simulation
# Run with:
#   python -m bsim examples/configs/ecology_with_temperature_ui.yaml --simui --open

meta:
  title: "Predator-Prey"
  description: |
    ## Temperature-Controlled Ecosystem

    This simulation exposes environment temperature as a module parameter.
    Adjust the `Environment` args to explore different regimes.

modules:
  environment:
    class: bsim.packs.ecology.Environment
    args:
      temperature: 20.0
      water: 80.0
      food_availability: 1.0

  rabbits:
    class: bsim.packs.ecology.OrganismPopulation
    args:
      name: "Rabbits"
      initial_count: 800
      birth_rate: 0.10
      death_rate: 0.02
      optimal_temp: 20.0
      temp_tolerance: 15.0
      carrying_capacity: 2000
      seed: 42

  foxes:
    class: bsim.packs.ecology.OrganismPopulation
    args:
      name: "Foxes"
      initial_count: 100
      birth_rate: 0.04
      death_rate: 0.02
      optimal_temp: 15.0
      temp_tolerance: 20.0
      food_efficiency: 0.8
      carrying_capacity: 300
      seed: 43

  predation:
    class: bsim.packs.ecology.PredatorPreyInteraction
    args:
      predation_rate: 0.005
      conversion_efficiency: 1.0

  pop_monitor:
    class: bsim.packs.ecology.PopulationMonitor

  phase_space:
    class: bsim.packs.ecology.PhaseSpaceMonitor
    args:
      x_species: "Rabbits"
      y_species: "Foxes"

  metrics:
    class: bsim.packs.ecology.EcologyMetrics

wiring:
  - from: environment.conditions
    to:
      - rabbits.conditions
      - foxes.conditions

  - from: rabbits.population_state
    to:
      - predation.prey_state
      - pop_monitor.population_state
      - phase_space.population_state
      - metrics.population_state

  - from: foxes.population_state
    to:
      - predation.predator_state
      - pop_monitor.population_state
      - phase_space.population_state
      - metrics.population_state

  - from: predation.predation
    to:
      - rabbits.predation

  - from: predation.food_gained
    to:
      - foxes.food_gained
